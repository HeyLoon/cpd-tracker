# 🧪 CPD Tracker v0.6.0 - 測試清單

## 📋 手動測試指南

在部署到 GitHub Pages 之前，請完成以下測試：

---

## 1️⃣ Supabase 設定流程

### 準備工作
- [ ] 已註冊 Supabase 帳號 (https://supabase.com)
- [ ] 已建立新專案
- [ ] 選擇了離你最近的區域

### SQL 腳本執行
- [ ] 開啟 Supabase Dashboard → SQL Editor
- [ ] 複製 `cpd-tracker/supabase/schema.sql` 的內容
- [ ] 貼上並執行 SQL
- [ ] 確認看到 "Success. No rows returned"
- [ ] 檢查 Table Editor，確認有 `assets` 和 `subscriptions` 表

### 取得配置
- [ ] 前往 Settings → API
- [ ] 複製 Project URL (https://xxxxx.supabase.co)
- [ ] 複製 anon public key (eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...)
- [ ] 記下這兩個值

---

## 2️⃣ CPD Tracker 設定

### 設定頁面
- [ ] 開啟 CPD Tracker (本地: http://localhost:5173 或線上版本)
- [ ] 點擊底部導航的「設定」
- [ ] 看到「資料同步設定」區塊
- [ ] 看到兩個後端選項：Supabase 和 PocketBase

### Supabase 配置
- [ ] 點擊「Supabase」按鈕（應該變成藍色）
- [ ] 看到 Supabase 配置表單展開
- [ ] 輸入 Supabase URL
- [ ] 輸入 Supabase Anon Key
- [ ] 點擊「儲存設定」
- [ ] 頁面自動重新載入

### 驗證設定
- [ ] 重新載入後，回到「設定」頁面
- [ ] 看到狀態顯示「使用 Supabase」
- [ ] 認證狀態顯示「未登入」
- [ ] 看到「前往登入/註冊」按鈕

---

## 3️⃣ 使用者註冊與登入

### 註冊流程
- [ ] 點擊「前往登入/註冊」或底部導航的「登入」
- [ ] 看到頂部顯示「使用 Supabase 同步」（藍色標籤）
- [ ] 點擊「註冊」標籤
- [ ] 輸入 Email (test@example.com)
- [ ] 輸入密碼（至少 8 個字元）
- [ ] 確認密碼
- [ ] 點擊「註冊帳號」
- [ ] 看到「註冊成功！請登入。」提示
- [ ] 自動切換到「登入」模式

### 登入流程
- [ ] 輸入剛才的 Email
- [ ] 輸入密碼
- [ ] 點擊「登入」
- [ ] 成功後自動跳轉到首頁
- [ ] 頂部沒有顯示黃色警告條（表示已登入）

---

## 4️⃣ 資產同步測試

### 新增資產
- [ ] 點擊「新增資產」
- [ ] 填寫資料：
  - 名稱：MacBook Pro M2
  - 分類：Tech
  - 價格：60000
  - 幣別：TWD
  - 購買日期：今天
  - 目標壽命：1825 天（5 年）
  - 角色：Standalone
- [ ] 點擊「儲存」
- [ ] 看到資產出現在列表中

### 檢查本地儲存
- [ ] 開啟瀏覽器開發者工具 (F12)
- [ ] 前往 Application → IndexedDB → CPDTrackerDB → assets
- [ ] 確認看到剛才新增的資產
- [ ] 檢查 `synced` 欄位應該是 `false`（待上傳）

### 等待自動同步
- [ ] 觀察頂部同步狀態列
- [ ] 應該顯示「1 個項目待上傳」（黃色）
- [ ] 等待 5 分鐘自動同步，或點擊「立即同步」
- [ ] 看到「正在同步資料...」（藍色，旋轉圖示）
- [ ] 完成後狀態列消失或顯示「已同步」

### 驗證遠端資料
- [ ] 回到 Supabase Dashboard
- [ ] 前往 Table Editor → assets
- [ ] 確認看到剛才上傳的資產
- [ ] 檢查 `user_id` 是否正確
- [ ] 檢查 `local_id` 是否為資產的 UUID

---

## 5️⃣ 多裝置同步測試

### 在第二個裝置/瀏覽器
- [ ] 開啟 CPD Tracker（使用無痕模式或其他瀏覽器）
- [ ] 前往「設定」頁面
- [ ] 輸入相同的 Supabase URL 和 Key
- [ ] 點擊「儲存設定」
- [ ] 前往「登入」頁面
- [ ] 使用相同的帳號登入
- [ ] 等待自動同步（或點擊「立即同步」）

### 驗證資料同步
- [ ] 確認裝置 A 的資產出現在裝置 B
- [ ] 檢查資料是否一致（名稱、價格、日期等）
- [ ] 在裝置 B 新增一個資產
- [ ] 等待同步
- [ ] 在裝置 A 重新整理或觸發同步
- [ ] 確認裝置 B 的資產出現在裝置 A

---

## 6️⃣ 訂閱同步測試

### 新增訂閱
- [ ] 點擊「訂閱」標籤
- [ ] 點擊「新增訂閱」
- [ ] 填寫資料：
  - 名稱：Spotify Premium
  - 費用：149
  - 幣別：TWD
  - 計費週期：Monthly
  - 分類：Entertainment
  - 開始日期：今天
- [ ] 點擊「儲存」
- [ ] 看到訂閱出現在列表中

### 檢查同步
- [ ] 觀察頂部同步狀態列
- [ ] 應該顯示「1 個項目待上傳」
- [ ] 觸發同步（自動或手動）
- [ ] 前往 Supabase → subscriptions 表
- [ ] 確認看到訂閱資料

---

## 7️⃣ 離線模式測試

### 斷線測試
- [ ] 開啟瀏覽器開發者工具
- [ ] 前往 Network 標籤
- [ ] 勾選「Offline」模擬離線
- [ ] 新增一個資產
- [ ] 確認資產出現在列表（儲存到 IndexedDB）
- [ ] 觀察同步狀態列顯示「離線模式」

### 重新連線
- [ ] 取消勾選「Offline」
- [ ] 重新整理頁面
- [ ] 等待自動同步
- [ ] 確認離線時新增的資產上傳成功
- [ ] 檢查 Supabase 是否有該資產

---

## 8️⃣ 錯誤處理測試

### 無效的 Supabase URL
- [ ] 前往「設定」
- [ ] 清除 Supabase 配置
- [ ] 輸入無效的 URL (例如: http://invalid.com)
- [ ] 點擊「儲存設定」
- [ ] （目前會重新載入，但可以考慮先驗證）

### 無效的 Anon Key
- [ ] 輸入正確的 URL
- [ ] 輸入錯誤的 Anon Key (例如: abc123)
- [ ] 點擊「儲存設定」
- [ ] 嘗試登入
- [ ] 確認看到錯誤訊息

### 登入失敗
- [ ] 輸入不存在的帳號
- [ ] 點擊「登入」
- [ ] 確認看到錯誤訊息：「登入失敗」
- [ ] 輸入錯誤的密碼
- [ ] 確認看到錯誤訊息

---

## 9️⃣ PocketBase 相容性測試（可選）

### 切換到 PocketBase
- [ ] 如果有 PocketBase 伺服器，前往「設定」
- [ ] 點擊「清除」Supabase 配置
- [ ] 點擊「PocketBase」按鈕
- [ ] 輸入 PocketBase URL
- [ ] 點擊「儲存設定」
- [ ] 登入 PocketBase 帳號
- [ ] 確認同步正常運作

### 切換回 Supabase
- [ ] 前往「設定」
- [ ] 點擊「清除」PocketBase 配置
- [ ] 點擊「Supabase」按鈕
- [ ] 輸入 Supabase 配置
- [ ] 點擊「儲存設定」
- [ ] 登入 Supabase 帳號
- [ ] 確認同步正常運作

---

## 🔟 UI/UX 檢查

### Settings 頁面
- [ ] 後端選擇器按鈕明顯且美觀
- [ ] 配置表單只在選擇後端時顯示
- [ ] 狀態指示器清楚（已登入/未登入）
- [ ] 連線健康狀態顯示（如果有）
- [ ] 按鈕間距與大小適當

### LoginPage
- [ ] 顯示正在使用的後端（Supabase/PocketBase）
- [ ] 如果未設定後端，顯示警告訊息
- [ ] 表單驗證正確（Email 格式、密碼長度）
- [ ] Loading 狀態顯示（登入/註冊中）
- [ ] 錯誤訊息清楚明瞭

### SyncStatusBar
- [ ] 顯示後端類型（Supabase/PocketBase）
- [ ] 同步狀態即時更新
- [ ] 進度指示器正確（旋轉圖示）
- [ ] 顏色正確（黃色=待上傳、藍色=同步中、綠色=已同步）
- [ ] 「立即同步」按鈕可用

---

## 1️⃣1️⃣ 效能檢查

### 首次載入
- [ ] 開啟 Network 標籤
- [ ] 重新整理頁面
- [ ] 首次載入時間 < 2 秒
- [ ] Bundle size ~1.1 MB

### 同步效能
- [ ] 新增 10 個資產
- [ ] 觸發同步
- [ ] 上傳時間 < 5 秒
- [ ] CPU 使用率正常

### 記憶體使用
- [ ] 開啟 Performance Monitor
- [ ] 正常使用 10 分鐘
- [ ] 記憶體使用穩定（無記憶體洩漏）

---

## 1️⃣2️⃣ 跨瀏覽器測試

### Chrome/Edge
- [ ] 所有功能正常
- [ ] UI 渲染正確
- [ ] PWA 可安裝

### Firefox
- [ ] 所有功能正常
- [ ] UI 渲染正確

### Safari (如果可用)
- [ ] 所有功能正常
- [ ] UI 渲染正確

### Mobile (如果可用)
- [ ] 響應式設計正確
- [ ] 觸控操作流暢
- [ ] PWA 可安裝

---

## ✅ 測試完成清單

完成以上所有測試後，在此打勾：

- [ ] 1️⃣ Supabase 設定流程
- [ ] 2️⃣ CPD Tracker 設定
- [ ] 3️⃣ 使用者註冊與登入
- [ ] 4️⃣ 資產同步測試
- [ ] 5️⃣ 多裝置同步測試
- [ ] 6️⃣ 訂閱同步測試
- [ ] 7️⃣ 離線模式測試
- [ ] 8️⃣ 錯誤處理測試
- [ ] 9️⃣ PocketBase 相容性測試（可選）
- [ ] 🔟 UI/UX 檢查
- [ ] 1️⃣1️⃣ 效能檢查
- [ ] 1️⃣2️⃣ 跨瀏覽器測試

---

## 🐛 發現的問題

在此記錄測試中發現的問題：

### 問題 1
- **描述**: 
- **重現步驟**: 
- **預期行為**: 
- **實際行為**: 
- **嚴重程度**: 🔴 Critical / 🟡 Major / 🟢 Minor

### 問題 2
- **描述**: 
- **重現步驟**: 
- **預期行為**: 
- **實際行為**: 
- **嚴重程度**: 

---

## 📝 測試筆記

記錄任何額外的觀察或建議：

```
（在此記錄你的筆記）
```

---

## ✅ 準備部署

所有測試通過且沒有 Critical 問題後，即可部署：

```bash
# 確認所有變更已提交
git status

# 建置專案
bun run build

# 提交並推送
git add .
git commit -m "feat: Add Supabase sync support (v0.6.0)"
git push origin master

# GitHub Actions 會自動部署到 GitHub Pages
```

---

**測試愉快！** 🧪
